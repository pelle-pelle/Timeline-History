<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>歴史人物タイムライン Pro - ID管理版</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>📜 歴史人物タイムライン</h1>
        <p>ID管理機能でデータがより安全になりました</p>
      </header>

      <div class="controls">
        <div class="control-row">
          <div class="control-group">
            <h3>🔍 検索</h3>
            <input type="text" id="search-input" placeholder="名前で検索..." />
          </div>
          <div class="control-group">
            <h3>🔎 ズーム</h3>
            <div class="zoom-control">
              <input
                type="range"
                id="zoom-slider"
                min="0.1"
                max="5"
                step="0.1"
                value="1"
              />
              <span id="zoom-value">1.0×</span>
              <button id="jump-today" class="btn btn-secondary btn-sm">
                📍 今日へ
              </button>
            </div>
          </div>
          <div class="control-group">
            <h3>💾 バックアップ</h3>
            <button id="export-btn" class="btn btn-secondary btn-sm">
              📤 保存
            </button>
            <button id="import-trigger" class="btn btn-secondary btn-sm">
              📥 復元
            </button>
            <input type="file" id="import-file" class="hidden" accept=".json" />
          </div>
        </div>

        <div class="control-group">
          <h3>🏷️ 表示フィルタ</h3>
          <div id="category-buttons" class="filter-row"></div>
          <div
            id="tag-legend-filter"
            class="filter-row"
            style="margin-top: 10px"
          ></div>
          <button
            id="open-tag-settings"
            class="btn btn-secondary btn-sm"
            style="margin-top: 5px"
          >
            ⚙️ タグ名を編集
          </button>
        </div>
      </div>

      <div
        id="axis-window"
        style="width: 100%; overflow: hidden; background: white"
      >
        <div id="timeline-axis" style="position: relative; height: 35px"></div>
      </div>

      <div id="timeline-container">
        <div id="era-background"></div>
        <div id="timeline-bars"></div>
      </div>

      <div class="form-section">
        <h2 id="form-title">✏️ 人物を追加</h2>
        <div
          id="edit-status"
          class="hidden"
          style="color: #e67e22; font-weight: bold; margin-bottom: 10px"
        >
          ※現在、既存の人物を編集しています
        </div>

        <form id="add-person-form">
          <div class="form-grid">
            <div class="form-field">
              <label>名前 *</label>
              <input type="text" id="person-name" required />
            </div>
            <div class="form-field">
              <label>生年 * (紀元前はマイナス)</label>
              <input type="number" id="person-birth" required />
            </div>
            <div class="form-field">
              <label>没年 (空欄は存命)</label>
              <input type="number" id="person-death" />
            </div>
            <div class="form-field">
              <label>カテゴリ *</label>
              <select id="person-category"></select>
            </div>
          </div>

          <div class="form-field" style="margin-top: 15px">
            <label>カラータグ（枠線の色）</label>
            <div id="tag-color-selector" class="tag-selector"></div>
          </div>

          <div class="form-field">
            <label>メモ</label>
            <textarea id="person-memo" rows="2"></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              💾 保存して年表に反映
            </button>
            <button
              type="button"
              id="cancel-button"
              class="btn btn-secondary hidden"
            >
              ❌ キャンセル
            </button>
            <button
              type="button"
              id="delete-button"
              class="btn btn-danger hidden"
            >
              🗑️ この人物を消去
            </button>
          </div>
        </form>
      </div>
    </div>

    <div id="tag-settings-modal" class="modal hidden">
      <div class="modal-content">
        <h2>🏷️ タグの意味を設定</h2>
        <div id="tag-names-container"></div>
        <div class="modal-actions">
          <button id="save-tag-settings" class="btn btn-primary">
            💾 保存
          </button>
          <button id="close-tag-settings" class="btn btn-secondary">
            閉じる
          </button>
        </div>
      </div>
    </div>

    <div id="tooltip" class="tooltip"></div>
    <script src="script.js"></script>
  </body>
</html>
